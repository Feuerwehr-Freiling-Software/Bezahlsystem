@page "/"
@using Paymentsystem.Shared.Models;
@using System.Timers;
@inject HttpClient http

<PageTitle>Index</PageTitle>

<AuthorizeView>
    <Authorized>
        <MudText Align="Align.Center" Typo="Typo.h2">Hallo @(context.User.Identity.Name)!</MudText>
        <MudText Align="Align.Center" Typo="Typo.body1">Was darf es heute sein?</MudText>
    </Authorized>
    <NotAuthorized>
        <MudText Align="Align.Center" Typo="Typo.h2">Hallo Benutzer!</MudText>
        <MudText Align="Align.Center" Typo="Typo.body1">Willkommen zum Bezahlsystem der Feuerwehr Freiling.</MudText>        
    </NotAuthorized>
</AuthorizeView>

@code{
    
    protected override async Task OnInitializedAsync()
    {
        //var connection = new HubConnectionBuilder()
        //    .WithUrl("https://localhost:7237/VendingHub")
        //    .Build();

        //await connection.StartAsync();
        
        //// implementation of EventListeners

        //connection.On("TestConnection", () =>
        //{
        //    Console.WriteLine(connection.ConnectionId);
        //});

        //for (int i = 0; i < 5; i++)
        //{
        //    await connection.InvokeAsync("TestConnection");            
        //}


    }
}